apply plugin: 'java'

sourceCompatibility = 1.8
version = '0.2.0'

repositories {
    mavenCentral()
}

dependencies {
    testCompile group: 'junit', name: 'junit', version: '4.11'
}

jar {
    baseName 'cats-peg'
    manifest {
        attributes 'Main-Class': 'by.muna.peg.Main'
    }
}

task createVersionFile << {
    File versionFile = new File(buildDir, 'VERSION')
    PrintWriter out = new PrintWriter(versionFile)
    out.println(version)
    out.close()
}
task createArchiveNameFile << {
    File archiveNameFile = new File(buildDir, 'JAR_NAME')
    PrintWriter out = new PrintWriter(archiveNameFile)
    out.println(jar.archiveName)
    out.close()
}